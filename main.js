!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._formSelector=n}var n,r;return n=t,(r=[{key:"_showInputError",value:function(e,t){var n=this._formSelector.querySelector("#".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),n.textContent=t,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formSelector.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this._settings.inactiveButtonClass):t.classList.remove(this._settings.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formSelector.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formSelector.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}},{key:"enableValidation",value:function(){var e=this;this._formSelector.addEventListener("submit",(function(t){t.preventDefault(),e._buttonElement.classList.add(e._settings.inactiveButtonClass)})),this._setEventListeners()}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,r;return t=e,(r=[{key:"_responseCheck",value:function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)}},{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then(this._responseCheck)}},{key:"apiUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(this._responseCheck)}},{key:"getServerInfo",value:function(){return Promise.all([this.getInitialCards(),this.apiUserInfo()])}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:n})}).then(this._responseCheck)}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then(this._responseCheck)}},{key:"editProfile",value:function(e){var t=e.name,n=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._responseCheck)}},{key:"editAvatar",value:function(e){return fetch(this._baseUrl+"/users/me/avatar/",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(this._responseCheck)}},{key:"addLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"PUT"}).then(this._responseCheck)}},{key:"removeLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"DELETE"}).then(this._responseCheck)}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardTitle=t.name,this._cardLink=t.link,this._cardOwnerID=t.owner._id,this._likes=t.likes,this._id=t._id,this._handleCardClick=n,this._handleDeleteClick=r,this._handleLike=o,this._userID=i}var t,n;return t=e,(n=[{key:"id",value:function(){return this._id}},{key:"handleDeleteCard",value:function(e){e.target.closest(".element").remove()}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("element__like-black")}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userID}))}},{key:"_likeCounter",value:function(){this._cloneCard.querySelector(".element__like-counter").textContent=this._likes.length,this.isLiked()?this._cardLike.classList.add("element__like-black"):this._cardLike.classList.remove("element__like-black")}},{key:"updateLikes",value:function(e){this._likes=e,this._likeCounter()}},{key:"_setEventListener",value:function(){var e=this;this._cardDeleteButton=this._cloneCard.querySelector(".element__trash"),this._cardLike.addEventListener("click",this._handleLikeIcon),this._cardLike.addEventListener("click",(function(){return e._handleLike(e,e.id())})),this._cardDeleteButton.addEventListener("click",(function(t){e._handleDeleteClick(e.id(),t.target.closest(".element"))})),this._cardImage.addEventListener("click",(function(){return e._handleCardClick()}))}},{key:"showLikes",value:function(){this._likes.length>0?this._cloneCard.querySelector(".element__like-counter").classList.add("element__like-counter_display"):0===this._likes.length&&this._cloneCard.querySelector(".element__like-counter").classList.remove("element__like-counter_display")}},{key:"_showDeleteBtn",value:function(){this._cardOwnerID==this._userID&&this._cloneCard.querySelector(".element__trash").classList.add("element__trash_display")}},{key:"getCard",value:function(){var e=document.querySelector("#el-template").content.querySelector(".element");return this._cloneCard=e.cloneNode(!0),this._cardLike=this._cloneCard.querySelector(".element__like-btn"),this._cardImage=this._cloneCard.querySelector(".element__image"),this._cardName=this._cloneCard.querySelector(".element__title"),this._cardTrashIcon=this._cloneCard.querySelector(".element__trash"),this._cardImage.src=this._cardLink,this._cardName.textContent=this._cardTitle,this._cardImage.alt="Picture of ".concat(this._cardName.textContent),this._showDeleteBtn(),this.showLikes(),this._likeCounter(),this._setEventListener(),this._cloneCard}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderCards",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),e}(),s=(document.querySelector(".elements"),document.querySelector("#imageFormOverlay")),u=(s.querySelector(".image-form__input_name"),s.querySelector(".image-form__input_about"),document.querySelector(".edit-form__input_name")),l=document.querySelector(".edit-form__input_about"),f=document.querySelector(".profile__add-btn"),h=document.querySelector(".profile__info-btn"),p=document.querySelector(".profile__avatar"),d=(s.querySelector(".image-form__form"),profileFormOverlay.querySelector(".edit-form__form"),document.querySelector(".avatar-form__btn")),y=document.querySelector(".edit-form__btn"),_=document.querySelector(".image-form__btn"),m={formSelector:".form",inputSelector:".form-input",submitButtonSelector:".form-submit",spanElement:".form-input-error",inactiveButtonClass:"form-submit_inactive",inputErrorClass:"form-input_type_error",errorClass:"form-input-error_active"};function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("overlay_popup"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("overlay_popup"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("close-icon")||t.target.classList.contains("overlay_popup"))&&e.close()}))}}])&&v(t.prototype,n),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupSubmit=t,n._submitHandler=n._submitHandler.bind(L(n)),n}return t=a,(n=[{key:"close",value:function(){w(O(a.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var e,t=function(e){if(Array.isArray(e))return g(e)}(e=this._form.querySelectorAll(".form-input"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n={};return t.forEach((function(e){n[e.name]=e.value})),n}},{key:"setEventListeners",value:function(){w(O(a.prototype),"setEventListeners",this).call(this),this._form=this._popup.querySelector(".form"),this._form.addEventListener("submit",this._submitHandler)}},{key:"_submitHandler",value:function(e){e.preventDefault();var t=this._getInputValues();this._popupSubmit(t)}}])&&S(t.prototype,n),a}(b);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._popup.querySelector(".image-popup__picture"),t._caption=t._popup.querySelector(".image-popup__caption"),t}return t=a,(n=[{key:"open",value:function(e,t){P(A(a.prototype),"open",this).call(this),this._image.src=t,this._caption.textContent=e}}])&&q(t.prototype,n),a}(b);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupSubmit=t,n}return t=a,(n=[{key:"open",value:function(e,t){B(V(a.prototype),"open",this).call(this),this._info=e,this._cardElement=t}},{key:"removeCardElement",value:function(){this._cardElement.remove()}},{key:"setEventListeners",value:function(){var e=this;B(V(a.prototype),"setEventListeners",this).call(this),this._form=this._popup.querySelector(".form"),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._popupSubmit(e._info)}))}}])&&x(t.prototype,n),a}(b);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._about=document.querySelector(n),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this.userInfo={name:this._name.textContent,job:this._about.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){var t=e.newName,n=e.newJob,r=e.avatarSrc;this._name.textContent=t,this._about.textContent=n,this._avatar.src=r}}])&&H(t.prototype,n),e}();function $(e,t){t.textContent=e?"Saving...":"Save"}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new t(m,document.querySelector(".edit-form")),K=new t(m,document.querySelector(".image-form"));G.enableValidation(),K.enableValidation();var Q=new r({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"3199dd72-198f-4d27-96ce-739071f3c183","Content-Type":"application/json"}});Q.getServerInfo().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],s=a._id;function u(e){return new i(e,(function(){Y.open(e.name,e.link)}),(function(e,t){ee.open(e,t)}),(function(e,t){e.isLiked()?Q.removeLike(t).then((function(t){e.updateLikes(t.likes)})).catch((function(e){return console.log(e)})):Q.addLike(t).then((function(t){e.updateLikes(t.likes),e.showLikes()})).catch((function(e){console.log(e)}))}),s).getCard()}W.setUserInfo({newName:a.name,newJob:a.about,avatarSrc:a.avatar});var l=new c({items:o,renderer:function(e){var t=u(e);l.addItem(t)}},".elements");l.renderCards();var h=new j("#imageFormOverlay",(function(e){$(!0,_),Q.addCard(e).then((function(e){l.prependItem(u(e)),$(!1,_)})).then((function(){return h.close()})).catch((function(e){console.log(e)}))}));h.setEventListeners(),f.addEventListener("click",(function(){h.open()}))})).catch((function(e){return console.log(e)})),h.addEventListener("click",(function(){Z.open();var e=W.getUserInfo();u.value=e.name,l.value=e.job})),p.addEventListener("click",(function(){X.open()}));var W=new M(".profile__info-title",".profile__info-about",".profile__avatar-image"),X=new j("#avatarFormOverlay",(function(e){$(!0,d),Q.editAvatar(e.link).then((function(e){W.setUserInfo({newName:e.name,newJob:e.about,avatarSrc:e.avatar}),$(!1,d)})).then((function(){return X.close()})).catch((function(e){console.log(e)}))})),Y=new U("#imageOverlay"),Z=new j("#profileFormOverlay",(function(e){$(!0,y),Q.editProfile({name:e.Name,about:e.About}).then((function(e){W.setUserInfo({newName:e.name,newJob:e.about,avatarSrc:e.avatar}),$(!1,y)})).then((function(){Z.close()})).catch((function(e){console.log(e)}))})),ee=new F("#deleteFormOverlay",(function(e){Q.removeCard(e).then((function(){ee.close(),ee.removeCardElement()})).catch((function(e){console.log(e)}))}));ee.setEventListeners(),Z.setEventListeners(),Y.setEventListeners(),X.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdC9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdC91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdC9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdC9jb21wb25lbnRzL0RlbGV0ZVBvcHVwRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdC9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0L3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0L3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiZXJyb3JNZXNzYWdlIiwiZm9ybUVycm9yIiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaXNWYWxpZCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1c1RleHQiLCJmZXRjaCIsInRoZW4iLCJfcmVzcG9uc2VDaGVjayIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImFwaVVzZXJJbmZvIiwibmFtZSIsImxpbmsiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJRCIsImFib3V0IiwiYXZhdGFyIiwiaXRlbXMiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2UiLCJ1c2VySUQiLCJfY2FyZFRpdGxlIiwiX2NhcmRMaW5rIiwiX2NhcmRPd25lcklEIiwib3duZXIiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZSIsIl91c2VySUQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwidG9nZ2xlIiwiaXRlbSIsIl9jbG9uZUNhcmQiLCJsZW5ndGgiLCJpc0xpa2VkIiwiX2NhcmRMaWtlIiwiX2xpa2VDb3VudGVyIiwiX2NhcmREZWxldGVCdXR0b24iLCJfaGFuZGxlTGlrZUljb24iLCJfY2FyZEltYWdlIiwiY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmROYW1lIiwiX2NhcmRUcmFzaEljb24iLCJzcmMiLCJhbHQiLCJfc2hvd0RlbGV0ZUJ0biIsInNob3dMaWtlcyIsIl9zZXRFdmVudExpc3RlbmVyIiwiY29udGFpbmVyIiwicmVuZGVyZXIiLCJfaW5pdGlhbEFycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiaW1hZ2VGb3JtT3ZlcmxheSIsImN1cnJlbnROYW1lIiwiY3VycmVudEpvYiIsImFkZFBsYWNlIiwicHJvZmlsZUVkaXQiLCJhdmF0YXJFZGl0IiwiYXZhdGFyQnRuIiwicHJvZmlsZUZvcm1PdmVybGF5IiwicHJvZmlsZUJ0biIsImltYWdlQnRuIiwic3BhbkVsZW1lbnQiLCJwb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsInBvcHVwU3VibWl0IiwiX3BvcHVwU3VibWl0IiwiX3N1Ym1pdEhhbmRsZXIiLCJfZm9ybSIsInJlc2V0IiwiaW5wdXRzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic3VibWl0dGVkVmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiY2FyZEluZm8iLCJjYXJkRWxlbWVudCIsIl9pbmZvIiwiX2NhcmRFbGVtZW50Iiwiam9iIiwiX25hbWUiLCJfYWJvdXQiLCJfYXZhdGFyIiwidXNlckluZm8iLCJuZXdOYW1lIiwibmV3Sm9iIiwiYXZhdGFyU3JjIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsInNlbGVjdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJhcGkiLCJBcGkiLCJhdXRob3JpemF0aW9uIiwiZ2V0U2VydmVySW5mbyIsImNhcmRzRGF0YSIsIndlYkluZm8iLCJyZW5kZXJDYXJkcyIsImNhcmRJdGVtIiwiQ2FyZCIsImltYWdlT3ZlcnZpZXdQb3B1cCIsIm9wZW4iLCJkZWxldGVGb3JtUG9wdXAiLCJyZW1vdmVMaWtlIiwidXBkYXRlTGlrZXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhZGRMaWtlIiwiZ2V0Q2FyZCIsInNldFVzZXJJbmZvIiwiaW5pdGlhbFNldHVwIiwiU2VjdGlvbiIsImNhcmQiLCJhZGRJdGVtIiwiaW1hZ2VGb3JtUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZGF0YSIsImFkZENhcmQiLCJwcmVwZW5kSXRlbSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZWRpdEZvcm1Qb3B1cCIsImdldFZhbHVlcyIsImdldFVzZXJJbmZvIiwiYXZhdGFyRm9ybVBvcHVwIiwiVXNlckluZm8iLCJlZGl0QXZhdGFyIiwiUG9wdXBXaXRoSW1hZ2UiLCJlZGl0UHJvZmlsZSIsIk5hbWUiLCJBYm91dCIsIkRlbGV0ZVBvcHVwRm9ybSIsInJlbW92ZUNhcmQiLCJyZW1vdmVDYXJkRWxlbWVudCJdLCJtYXBwaW5ncyI6Im1NQWlFQSxFLFdBaEVFLFdBQVlBLEVBQVVDLEksNEZBQWMsU0FDbENDLEtBQUtDLFVBQVlILEVBQ2pCRSxLQUFLRSxjQUFnQkgsRSxvREFHdkIsU0FBZ0JJLEVBQWVDLEdBQzdCLElBQU1DLEVBQVlMLEtBQUtFLGNBQWNJLGNBQW5CLFdBQXFDSCxFQUFjSSxHQUFuRCxXQUNsQkosRUFBY0ssVUFBVUMsSUFBSVQsS0FBS0MsVUFBVVMsaUJBQzNDTCxFQUFVTSxZQUFjUCxFQUN4QkMsRUFBVUcsVUFBVUMsSUFBSVQsS0FBS0MsVUFBVVcsYyw2QkFHekMsU0FBZ0JULEdBQ2QsSUFBTUUsRUFBWUwsS0FBS0UsY0FBY0ksY0FB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QU92QyxNQUV0Qm5FLE1BQUssa0JBQU1tSixFQUFnQnJFLFdBQzNCaUQsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixTQUtkTixFQUFxQixJQUFJNEIsRUFBZSxpQkFHeENOLEVBQWdCLElBQUlMLEVBQ3hCLHVCQUF1QixTQUFDQyxHQUN0QmxDLEdBQWMsRUFBTXJDLEdBRXBCNEMsRUFBSXNDLFlBQVksQ0FBRWxKLEtBQU11SSxFQUFLWSxLQUFNNUksTUFBT2dJLEVBQUthLFFBQzVDekosTUFBSyxTQUFBNEksR0FDSnRDLEVBQVMrQixZQUFZLENBQUU5QixRQUFTcUMsRUFBS3ZJLEtBQU1tRyxPQUFRb0MsRUFBS2hJLE1BQU82RixVQUFXbUMsRUFBSy9ILFNBQy9FNkYsR0FBYyxFQUFPckMsTUFFdEJyRSxNQUFLLFdBQ0pnSixFQUFjbEUsV0FFZmlELE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsU0FNZEosR0FBa0IsSUFBSThCLEVBQWdCLHNCQUMxQyxTQUFDL0ksR0FDQ3NHLEVBQUkwQyxXQUFXaEosR0FDWlgsTUFBSyxXQUNKNEgsR0FBZ0I5QyxRQUNoQjhDLEdBQWdCZ0MsdUJBRWpCN0IsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixTQU1wQkosR0FBZ0JtQixvQkFDaEJDLEVBQWNELG9CQUNkckIsRUFBbUJxQixvQkFDbkJJLEVBQWdCSixvQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dFNlbGVjdG9yLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dFNlbGVjdG9yLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dFNlbGVjdG9yKSB7XHJcbiAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRTZWxlY3Rvci5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0U2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZm9ybUVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2lzVmFsaWQoaW5wdXRTZWxlY3Rvcikge1xyXG4gICAgaWYgKCFpbnB1dFNlbGVjdG9yLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0U2VsZWN0b3IsIGlucHV0U2VsZWN0b3IudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dFNlbGVjdG9yKSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRTZWxlY3Rvci52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uU2VsZWN0b3IpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3Rvci5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0U2VsZWN0b3IpID0+IHtcclxuICAgICAgaW5wdXRTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIC8vIGNvbnN0cnVjdG9yIGJvZHlcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIC8vIFJFU1BPTlNFIENIRUNLXG4gIF9yZXNwb25zZUNoZWNrKHJlcykge1xuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yIWAgKyByZXMuc3RhdHVzVGV4dClcbiAgfVxuXG5cbiAgLy8gR0VUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkc1xuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkc1wiLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9yZXNwb25zZUNoZWNrKVxuICB9XG5cblxuICAvLyBHRVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL3VzZXJzL21lXG4gIGFwaVVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fcmVzcG9uc2VDaGVjaylcbiAgfVxuXG5cbiAgZ2V0U2VydmVySW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuYXBpVXNlckluZm8oKV0pXG4gIH1cblxuICAvLyBQT1NUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkc1xuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkc1wiLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX3Jlc3BvbnNlQ2hlY2spXG5cbiAgfVxuXG4gIC8vIERFTEVURSBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvY2FyZHMvY2FyZElkXG4gIHJlbW92ZUNhcmQoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkcy9cIiArIGNhcmRJRCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX3Jlc3BvbnNlQ2hlY2spXG5cbiAgfVxuXG4gIC8vIFBBVENIIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC91c2Vycy9tZVxuICBlZGl0UHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9yZXNwb25zZUNoZWNrKVxuXG4gIH1cblxuICBlZGl0QXZhdGFyKGF2YXRhcikge1xuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lL2F2YXRhci8nLCB7XG4gICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGF2YXRhclxuICAgICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fcmVzcG9uc2VDaGVjaylcblxuICB9XG5cbiAgLy8gUFVUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkcy9saWtlcy9jYXJkSWRcbiAgYWRkTGlrZShjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgY2FyZElELCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fcmVzcG9uc2VDaGVjaylcblxuICB9XG5cbiAgLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkcy9saWtlcy9jYXJkSWRcbiAgcmVtb3ZlTGlrZShjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgY2FyZElELCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fcmVzcG9uc2VDaGVjaylcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcblxuLy8gb3duZXIgY2FyZCBpZDogYTJmYmY5YjBjYWQxNDRlZjk4ZGUxYTIzXG5cbi8vIFRva2VuOiAzMTk5ZGQ3Mi0xOThmLTRkMjctOTZjZS03MzkwNzFmM2MxODNcbi8vIEdyb3VwIElEOiBncm91cC03XG5cbi8vIGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuLy8gICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtNDJcIixcbi8vICAgaGVhZGVyczoge1xuLy8gICAgIGF1dGhvcml6YXRpb246IFwiYzU2ZTMwZGMtMjg4My00MjcwLWE1OWUtYjJmN2JhZTk2OWM2XCIsXG4vLyAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbi8vICAgfVxuLy8gfSk7XG4iLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoaXRlbXMsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2UsIHVzZXJJRCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IGl0ZW1zLm5hbWU7XG4gICAgdGhpcy5fY2FyZExpbmsgPSBpdGVtcy5saW5rO1xuICAgIHRoaXMuX2NhcmRPd25lcklEID0gaXRlbXMub3duZXIuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gaXRlbXMubGlrZXM7XG4gICAgdGhpcy5faWQgPSBpdGVtcy5faWQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XG4gICAgLy8gdGhpcy5fdXNlcklkID0gXCJhMmZiZjliMGNhZDE0NGVmOThkZTFhMjNcIjtcbiAgICB0aGlzLl91c2VySUQgPSB1c2VySUQ7XG5cbiAgfVxuXG4gIGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoZXZ0KSB7XG4gICAgZXZ0LnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRcIikucmVtb3ZlKCk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oZXZ0KSB7XG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZS1ibGFja1wiKTtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoaXRlbSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklEKTtcbiAgfVxuXG4gIF9saWtlQ291bnRlcigpIHtcbiAgICB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fbGlrZS1ibGFja1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2xpa2UtYmxhY2tcIik7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlTGlrZXMobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaCcpO1xuICAgIHRoaXMuX2NhcmRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlSWNvbik7XG4gICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2UodGhpcywgdGhpcy5pZCgpKSk7XG5cbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7IHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuaWQoKSwgZXZ0LnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRcIikpfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKSk7XG4gIH1cblxuICBzaG93TGlrZXMoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtY291bnRlclwiKS5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fbGlrZS1jb3VudGVyX2Rpc3BsYXlcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9saWtlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtY291bnRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9fbGlrZS1jb3VudGVyX2Rpc3BsYXlcIik7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dEZWxldGVCdG4oKSB7XG4gICAgaWYgKHRoaXMuX2NhcmRPd25lcklEID09IHRoaXMuX3VzZXJJRCkge1xuICAgICAgdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdHJhc2hcIikuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX3RyYXNoX2Rpc3BsYXlcIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FyZCgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsLXRlbXBsYXRlXCIpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xuICAgIHRoaXMuX2Nsb25lQ2FyZCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZExpa2UgPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ0blwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkTmFtZSA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRUcmFzaEljb24gPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaFwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fY2FyZExpbms7XG4gICAgdGhpcy5fY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkVGl0bGU7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBQaWN0dXJlIG9mICR7dGhpcy5fY2FyZE5hbWUudGV4dENvbnRlbnR9YDtcblxuICAgIHRoaXMuX3Nob3dEZWxldGVCdG4oKTtcbiAgICB0aGlzLnNob3dMaWtlcygpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xuICAgIHJldHVybiB0aGlzLl9jbG9uZUNhcmQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgfVxuXG4gIHJlbmRlckNhcmRzKCkge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiY29uc3QgY2FyZFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuXG5jb25zdCBpbWFnZUZvcm1PdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZUZvcm1PdmVybGF5XCIpO1xuXG5jb25zdCBmb3JtSW1hZ2VOYW1lID0gaW1hZ2VGb3JtT3ZlcmxheS5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWZvcm1fX2lucHV0X25hbWVcIik7XG5jb25zdCBmb3JtSW1hZ2VMaW5rID0gaW1hZ2VGb3JtT3ZlcmxheS5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWZvcm1fX2lucHV0X2Fib3V0XCIpO1xuXG5jb25zdCBjdXJyZW50TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtX19pbnB1dF9uYW1lXCIpO1xuY29uc3QgY3VycmVudEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtX19pbnB1dF9hYm91dFwiKTtcblxuY29uc3QgYWRkUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XG5jb25zdCBwcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1idG5cIik7XG5cbmNvbnN0IGF2YXRhckVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbmNvbnN0IGZvcm1JbWFnZVN1Ym1pdCA9IGltYWdlRm9ybU92ZXJsYXkucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1mb3JtX19mb3JtXCIpO1xuY29uc3QgZm9ybVByb2ZpbGVTdWJtaXQgPSBwcm9maWxlRm9ybU92ZXJsYXkucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1fX2Zvcm1cIik7XG5cbmNvbnN0IGF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXZhdGFyLWZvcm1fX2J0blwiKTtcbmNvbnN0IHByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybV9fYnRuXCIpO1xuY29uc3QgaW1hZ2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWZvcm1fX2J0blwiKTtcblxuY29uc3QgY2FyZEVsZW1lbnRTZWxlY3RvciA9IFwiLmVsZW1lbnRzXCI7XG5cbmNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybS1pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybS1zdWJtaXRcIixcbiAgc3BhbkVsZW1lbnQ6IFwiLmZvcm0taW5wdXQtZXJyb3JcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtLXN1Ym1pdF9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybS1pbnB1dC1lcnJvcl9hY3RpdmVcIlxufTtcblxuXG5leHBvcnQgeyBhdmF0YXJCdG4sIGltYWdlQnRuLCBwcm9maWxlQnRuLCBhdmF0YXJFZGl0LCBpbWFnZUZvcm1PdmVybGF5LCBjdXJyZW50TmFtZSwgY3VycmVudEpvYiwgY2FyZEVsZW1lbnRTZWxlY3RvciwgY2FyZFdyYXBwZXIsIGZvcm1JbWFnZU5hbWUsIGZvcm1JbWFnZUxpbmssIGFkZFBsYWNlLCBwcm9maWxlRWRpdCxcbmZvcm1JbWFnZVN1Ym1pdCwgZm9ybVByb2ZpbGVTdWJtaXQsIHNldHRpbmdzfTtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcbiAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheV9wb3B1cFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXlfcG9wdXBcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZS1pY29uXCIpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdvdmVybGF5X3BvcHVwJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIHBvcHVwU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuX3BvcHVwU3VibWl0ID0gcG9wdXBTdWJtaXQ7XG5cblxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSB0aGlzLl9zdWJtaXRIYW5kbGVyLmJpbmQodGhpcyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybS1pbnB1dFwiKV07XG4gICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEhhbmRsZXIpO1xuICB9XG5cbiAgX3N1Ym1pdEhhbmRsZXIoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qgc3VibWl0dGVkVmFsdWUgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX3BvcHVwU3VibWl0KHN1Ym1pdHRlZFZhbHVlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHN1cGVyKHBvcHVwKTtcblxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1wb3B1cF9fcGljdHVyZVwiKTtcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1wb3B1cF9fY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuLy8gTGV0cyBzZWUgaWYgdGhlIG5hbWUgY2hhbmdlcyB0aGlzIHRpbWUhXG5jbGFzcyBEZWxldGVQb3B1cEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBwb3B1cFN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgICB0aGlzLl9wb3B1cFN1Ym1pdCA9IHBvcHVwU3VibWl0O1xuICB9XG5cbiAgb3BlbihjYXJkSW5mbywgY2FyZEVsZW1lbnQpe1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbmZvID0gY2FyZEluZm87XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIHJlbW92ZUNhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3BvcHVwU3VibWl0KHRoaXMuX2luZm8pO1xuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVsZXRlUG9wdXBGb3JtO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBqb2IsIGF2YXRhcikge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXJJbmZvID0geyBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBqb2I6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LCBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHtuZXdOYW1lLCBuZXdKb2IsIGF2YXRhclNyY30pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3TmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IG5ld0pvYjtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyU3JjO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiLy9GVU5DVElPTiBGT1IgSU1QUk9WRSBUSEUgVVhcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBzZWxlY3Rvcikge1xuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgc2VsZWN0b3IudGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICB9IGVsc2Uge1xuICAgIHNlbGVjdG9yLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gIH1cbn1cblxuXG5cbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBhdmF0YXJCdG4sIGltYWdlQnRuLCBwcm9maWxlQnRuLCBhdmF0YXJFZGl0LCBjdXJyZW50TmFtZSwgY3VycmVudEpvYiwgY2FyZEVsZW1lbnRTZWxlY3RvciwgYWRkUGxhY2UsIHByb2ZpbGVFZGl0LCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IERlbGV0ZVBvcHVwRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9EZWxldGVQb3B1cEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHJlbmRlckxvYWRpbmcgZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XG5pbXBvcnQgXCIuLi8uLi9zdHlsZXMvcGFnZXMvaW5kZXguY3NzXCI7XG5cblxuLy8gVkFMSURBVElPTlxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1cIikpO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWZvcm1cIikpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vLy8vLy8vLy8vLy8vLyBBUEkgLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTdcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiMzE5OWRkNzItMTk4Zi00ZDI3LTk2Y2UtNzM5MDcxZjNjMTgzXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cbi8vIGdldFNlcnZlckluZm9cbmFwaS5nZXRTZXJ2ZXJJbmZvKClcbiAgLnRoZW4oKFtjYXJkc0RhdGEsIHdlYkluZm9dKSA9PiB7XG4gICAgY29uc3QgdXNlcklEID0gd2ViSW5mby5faWQ7XG5cbiAgICAvLyBGVU5DVElPTiBGT1IgUkVOREVSSU5HIENBUkRTXG4gICAgZnVuY3Rpb24gcmVuZGVyQ2FyZHMoY2FyZEl0ZW0pIHtcbiAgICAgIHJldHVybiBuZXcgQ2FyZChcbiAgICAgICAgY2FyZEl0ZW0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBpbWFnZU92ZXJ2aWV3UG9wdXAub3BlbihjYXJkSXRlbS5uYW1lLCBjYXJkSXRlbS5saW5rKVxuICAgICAgICB9LFxuICAgICAgICAoY2FyZElELCBjYXJkRWxlbWVudCkgPT4ge1xuICAgICAgICAgIGRlbGV0ZUZvcm1Qb3B1cC5vcGVuKGNhcmRJRCwgY2FyZEVsZW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgICAoY2FyZEVsZW1lbnQsIGNhcmRJRCkgPT4ge1xuICAgICAgICAgIGlmIChjYXJkRWxlbWVudC5pc0xpa2VkKCkpIHtcbiAgICAgICAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmRJRClcbiAgICAgICAgICAgICAgLnRoZW4oZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQudXBkYXRlTGlrZXMoZWxlbWVudC5saWtlcylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcGkuYWRkTGlrZShjYXJkSUQpXG4gICAgICAgICAgICAgIC50aGVuKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50LnVwZGF0ZUxpa2VzKGVsZW1lbnQubGlrZXMpO1xuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50LnNob3dMaWtlcygpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9LCB1c2VySUQpLmdldENhcmQoKVxuICAgIH1cblxuICAgIC8vIEFQSSBGT1IgVVNFUklORk9cbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5ld05hbWU6IHdlYkluZm8ubmFtZSwgbmV3Sm9iOiB3ZWJJbmZvLmFib3V0LCBhdmF0YXJTcmM6IHdlYkluZm8uYXZhdGFyIH0pXG5cbiAgICAvLyBJTklUSUFMIFNFVFVQIFNFQ1RJT05cbiAgICBjb25zdCBpbml0aWFsU2V0dXAgPSBuZXcgU2VjdGlvbih7XG4gICAgICBpdGVtczogY2FyZHNEYXRhLFxuICAgICAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZHMoY2FyZEl0ZW0pO1xuICAgICAgICBpbml0aWFsU2V0dXAuYWRkSXRlbShjYXJkKTtcbiAgICAgIH1cbiAgICB9LCBjYXJkRWxlbWVudFNlbGVjdG9yKVxuICAgIGluaXRpYWxTZXR1cC5yZW5kZXJDYXJkcygpO1xuXG4gICAgLy9GT1IgQURESU5HIENBUkRTXG4gICAgY29uc3QgaW1hZ2VGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgICAgIFwiI2ltYWdlRm9ybU92ZXJsYXlcIixcbiAgICAgIChkYXRhKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgaW1hZ2VCdG4pO1xuICAgICAgICBhcGkuYWRkQ2FyZChkYXRhKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpbml0aWFsU2V0dXAucHJlcGVuZEl0ZW0ocmVuZGVyQ2FyZHMoZGF0YSkpO1xuICAgICAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgaW1hZ2VCdG4pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKCkgPT4gaW1hZ2VGb3JtUG9wdXAuY2xvc2UoKSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBTRVQgRVZFTlQgTElTVEVORVJTXG4gICAgaW1hZ2VGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLyBFVkVOVCBMSVNURU5FUlMgLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQUREIENBUkRcbiAgICBhZGRQbGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaW1hZ2VGb3JtUG9wdXAub3BlbigpO1xuICAgIH0pXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbi8vLy8vLy8vLy8vLy8vLyBFVkVOVCBMSVNURU5FUlMgLy8vLy8vLy8vLy8vLy8vXG4vLyBQUk9GSUxFOiBOQU1FIEFORCBKT0JcbnByb2ZpbGVFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xuICBjb25zdCBnZXRWYWx1ZXMgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBjdXJyZW50TmFtZS52YWx1ZSA9IGdldFZhbHVlcy5uYW1lO1xuICBjdXJyZW50Sm9iLnZhbHVlID0gZ2V0VmFsdWVzLmpvYjtcbn0pO1xuXG4vLyBBVkFUQVJcbmF2YXRhckVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRm9ybVBvcHVwLm9wZW4oKVxufSk7XG5cbi8vIFVTRVJJTkZPIFNFTEVDVE9SU1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9faW5mby10aXRsZVwiLCBcIi5wcm9maWxlX19pbmZvLWFib3V0XCIsIFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiKTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8gRk9STVMgLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFBPUFVQIEFWQVRBUiBGT1JNXG5jb25zdCBhdmF0YXJGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhdmF0YXJGb3JtT3ZlcmxheVwiLFxuICAoZGF0YSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYXZhdGFyQnRuKTtcbiAgICBhcGkuZWRpdEF2YXRhcihkYXRhLmxpbmspXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmV3TmFtZTogcmVzLm5hbWUsIG5ld0pvYjogcmVzLmFib3V0LCBhdmF0YXJTcmM6IHJlcy5hdmF0YXIgfSlcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgYXZhdGFyQnRuKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiBhdmF0YXJGb3JtUG9wdXAuY2xvc2UoKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9KVxuXG4vLyBQT1BVUCBJTUFHRSBPVkVSVklFV1xuY29uc3QgaW1hZ2VPdmVydmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlT3ZlcmxheVwiKTtcblxuLy8gUE9QVVAgUFJPRklMRSBGT1JNXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGVGb3JtT3ZlcmxheVwiLCAoZGF0YSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvZmlsZUJ0bik7XG4gICAgLy8gQVBJIEZPUiBFRElUSU5HIFBST0ZJTEVcbiAgICBhcGkuZWRpdFByb2ZpbGUoeyBuYW1lOiBkYXRhLk5hbWUsIGFib3V0OiBkYXRhLkFib3V0IH0pXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuZXdOYW1lOiBkYXRhLm5hbWUsIG5ld0pvYjogZGF0YS5hYm91dCwgYXZhdGFyU3JjOiBkYXRhLmF2YXRhciB9KTtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcHJvZmlsZUJ0bik7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBlZGl0Rm9ybVBvcHVwLmNsb3NlKClcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgfVxuKTtcblxuLy8gREVMRVRFIEZPUk1cbmNvbnN0IGRlbGV0ZUZvcm1Qb3B1cCA9IG5ldyBEZWxldGVQb3B1cEZvcm0oXCIjZGVsZXRlRm9ybU92ZXJsYXlcIixcbiAgKGNhcmRJRCkgPT4ge1xuICAgIGFwaS5yZW1vdmVDYXJkKGNhcmRJRClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgZGVsZXRlRm9ybVBvcHVwLmNsb3NlKCk7XG4gICAgICAgIGRlbGV0ZUZvcm1Qb3B1cC5yZW1vdmVDYXJkRWxlbWVudCgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9XG4pO1xuXG4vLyBTRVQgRVZFTlQgTElTVEVORVJTXG5kZWxldGVGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlT3ZlcnZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9